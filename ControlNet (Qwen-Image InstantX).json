{"revision":0,"last_node_id":109,"last_link_id":0,"nodes":[{"id":109,"type":"014000e7-58f1-44cf-b764-cf15d4559d2d","pos":[600,-70],"size":[390,470],"flags":{},"order":0,"mode":0,"inputs":[{"label":"control_image","localized_name":"image","name":"image","type":"IMAGE","link":null},{"name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]}],"title":"ControlNet (Qwen-Image InstantX)","properties":{"proxyWidgets":[["6","text"],["3","seed"],["3","control_after_generate"],["-1","strength"]]},"widgets_values":[null,null,null,1]}],"links":[],"version":0.4,"definitions":{"subgraphs":[{"id":"014000e7-58f1-44cf-b764-cf15d4559d2d","version":1,"state":{"lastGroupId":5,"lastNodeId":108,"lastLinkId":190,"lastRerouteId":0},"revision":0,"config":{},"name":"ControlNet (Qwen-Image InstantX)","inputNode":{"id":-10,"bounding":[-310,288,120,80]},"outputNode":{"id":-20,"bounding":[1200,298,120,60]},"inputs":[{"id":"ae68a3c5-c788-4a4b-bdbc-84a80e3694b9","name":"image","type":"IMAGE","linkIds":[188,189],"localized_name":"image","label":"control_image","pos":[-210,308]},{"id":"a8c73330-30f6-493f-9994-0d4afcfb14a3","name":"strength","type":"FLOAT","linkIds":[190],"pos":[-210,328]}],"outputs":[{"id":"b35d4d71-00d5-489c-be0e-bb29e3d447c9","name":"IMAGE","type":"IMAGE","linkIds":[110],"localized_name":"IMAGE","pos":[1220,318]}],"widgets":[],"nodes":[{"id":7,"type":"CLIPTextEncode","pos":[300,380],"size":[460,140],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":75},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[152]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.51"},"widgets_values":[""],"color":"#223","bgcolor":"#335"},{"id":38,"type":"CLIPLoader","pos":[-120,130],"size":[380,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[74,75]}],"properties":{"Node name for S&R":"CLIPLoader","cnr_id":"comfy-core","ver":"0.3.51","models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders"}]},"widgets_values":["qwen_2.5_vl_7b_fp8_scaled.safetensors","qwen_image","default"]},{"id":39,"type":"VAELoader","pos":[-120,290],"size":[380,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[76,144,153]}],"properties":{"Node name for S&R":"VAELoader","cnr_id":"comfy-core","ver":"0.3.51","models":[{"name":"qwen_image_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors","directory":"vae"}]},"widgets_values":["qwen_image_vae.safetensors"]},{"id":84,"type":"ControlNetLoader","pos":[-120,400],"size":[380,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","links":[150]}],"properties":{"Node name for S&R":"ControlNetLoader","cnr_id":"comfy-core","ver":"0.3.51","models":[{"name":"Qwen-Image-InstantX-ControlNet-Union.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image-InstantX-ControlNets/resolve/main/split_files/controlnet/Qwen-Image-InstantX-ControlNet-Union.safetensors","directory":"controlnet"}]},"widgets_values":["Qwen-Image-InstantX-ControlNet-Union.safetensors"]},{"id":37,"type":"UNETLoader","pos":[-120,0],"size":[380,82],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[145]}],"properties":{"Node name for S&R":"UNETLoader","cnr_id":"comfy-core","ver":"0.3.51","models":[{"name":"qwen_image_fp8_e4m3fn.safetensors","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_fp8_e4m3fn.safetensors","directory":"diffusion_models"}]},"widgets_values":["qwen_image_fp8_e4m3fn.safetensors","default"]},{"id":8,"type":"VAEDecode","pos":[830,510],"size":[310,46],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":128},{"localized_name":"vae","name":"vae","type":"VAE","link":76}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[110]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.51"}},{"id":80,"type":"LoraLoaderModelOnly","pos":[320,-10],"size":[430,82],"flags":{},"order":9,"mode":4,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":145},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[149]}],"properties":{"Node name for S&R":"LoraLoaderModelOnly","cnr_id":"comfy-core","ver":"0.3.51","models":[{"name":"Qwen-Image-Lightning-4steps-V1.0.safetensors","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors","directory":"loras"}]},"widgets_values":["Qwen-Image-Lightning-4steps-V1.0.safetensors",1]},{"id":68,"type":"Note","pos":[800,-250],"size":[310,90],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Increase the shift if you get too many blury/dark/bad images. Decrease if you want to try increasing detail."],"color":"#432","bgcolor":"#653"},{"id":66,"type":"ModelSamplingAuraFlow","pos":[810,-110],"size":[310,58],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":149},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[156]}],"properties":{"Node name for S&R":"ModelSamplingAuraFlow","cnr_id":"comfy-core","ver":"0.3.51"},"widgets_values":[3.1000000000000005]},{"id":86,"type":"Note","pos":[830,610],"size":[307.4002380371094,127.38092803955078],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Set cfg to 1.0 for a speed boost at the cost of consistency. Samplers like res_multistep work pretty well at cfg 1.0\n\nThe official number of steps is 50 but I think that's too much. Even just 10 steps seems to work."],"color":"#432","bgcolor":"#653"},{"id":79,"type":"MarkdownNote","pos":[830,790],"size":[310,140],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"title":"KSampler settings","properties":{},"widgets_values":["You can test and find the best setting by yourself. The following table is for reference.\n\n| model            | steps | cfg |\n|---------------------|---------------|---------------|\n| fp8_e4m3fn             | 20                | 2.5               |\n| fp8_e4m3fn + 4 Steps lightning LoRA    | 4               | 1.0               |\n"],"color":"#432","bgcolor":"#653"},{"id":76,"type":"VAEEncode","pos":[530,890],"size":[140,46],"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":189},{"localized_name":"vae","name":"vae","type":"VAE","link":144}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[142]}],"properties":{"Node name for S&R":"VAEEncode","cnr_id":"comfy-core","ver":"0.3.51"}},{"id":6,"type":"CLIPTextEncode","pos":[300,170],"size":[460,164.31304931640625],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":74},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[151]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.51"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":85,"type":"ControlNetApplyAdvanced","pos":[440,650],"size":[220,186],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":151},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":152},{"localized_name":"control_net","name":"control_net","type":"CONTROL_NET","link":150},{"localized_name":"image","name":"image","type":"IMAGE","link":188},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":153},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":190},{"localized_name":"start_percent","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[154]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[155]}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced","cnr_id":"comfy-core","ver":"0.3.51"},"widgets_values":[1,0,1]},{"id":3,"type":"KSampler","pos":[830,30],"size":[310,430],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":156},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":154},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":155},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":142},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[128]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.51"},"widgets_values":[0,"randomize",20,2.5,"euler","simple",1]}],"groups":[{"id":1,"title":"Step 1 - Upload models","bounding":[-130,-80,400,610],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Step 3 - Prompt","bounding":[290,100,490,430],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"4 steps lightning LoRA","bounding":[290,-80,490,160],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":75,"origin_id":38,"origin_slot":0,"target_id":7,"target_slot":0,"type":"CLIP"},{"id":128,"origin_id":3,"origin_slot":0,"target_id":8,"target_slot":0,"type":"LATENT"},{"id":76,"origin_id":39,"origin_slot":0,"target_id":8,"target_slot":1,"type":"VAE"},{"id":145,"origin_id":37,"origin_slot":0,"target_id":80,"target_slot":0,"type":"MODEL"},{"id":151,"origin_id":6,"origin_slot":0,"target_id":85,"target_slot":0,"type":"CONDITIONING"},{"id":152,"origin_id":7,"origin_slot":0,"target_id":85,"target_slot":1,"type":"CONDITIONING"},{"id":150,"origin_id":84,"origin_slot":0,"target_id":85,"target_slot":2,"type":"CONTROL_NET"},{"id":153,"origin_id":39,"origin_slot":0,"target_id":85,"target_slot":4,"type":"VAE"},{"id":149,"origin_id":80,"origin_slot":0,"target_id":66,"target_slot":0,"type":"MODEL"},{"id":156,"origin_id":66,"origin_slot":0,"target_id":3,"target_slot":0,"type":"MODEL"},{"id":154,"origin_id":85,"origin_slot":0,"target_id":3,"target_slot":1,"type":"CONDITIONING"},{"id":155,"origin_id":85,"origin_slot":1,"target_id":3,"target_slot":2,"type":"CONDITIONING"},{"id":142,"origin_id":76,"origin_slot":0,"target_id":3,"target_slot":3,"type":"LATENT"},{"id":144,"origin_id":39,"origin_slot":0,"target_id":76,"target_slot":1,"type":"VAE"},{"id":74,"origin_id":38,"origin_slot":0,"target_id":6,"target_slot":0,"type":"CLIP"},{"id":188,"origin_id":-10,"origin_slot":0,"target_id":85,"target_slot":3,"type":"IMAGE"},{"id":110,"origin_id":8,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":189,"origin_id":-10,"origin_slot":0,"target_id":76,"target_slot":0,"type":"IMAGE"},{"id":190,"origin_id":-10,"origin_slot":1,"target_id":85,"target_slot":5,"type":"FLOAT"}],"extra":{"workflowRendererVersion":"LG"}}]}}