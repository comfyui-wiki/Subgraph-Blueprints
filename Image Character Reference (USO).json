{"id":"7d9761e1-e6bc-45d0-b4d1-2d6ae183b974","revision":0,"last_node_id":75,"last_link_id":0,"nodes":[{"id":75,"type":"aba5f702-28a4-417c-bf01-e3b2cb08aeeb","pos":[800,2230],"size":[390,470],"flags":{},"order":0,"mode":0,"inputs":[{"label":"reference_image","localized_name":"image","name":"image","type":"IMAGE","link":null},{"name":"text","type":"STRING","widget":{"name":"text"},"link":null},{"name":"width","type":"INT","widget":{"name":"width"},"link":null},{"name":"height","type":"INT","widget":{"name":"height"},"link":null},{"name":"seed","type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"proxyWidgets":[["-1","text"],["-1","width"],["-1","height"],["-1","seed"],["31","control_after_generate"]]},"widgets_values":["",1024,1024,0]}],"links":[],"groups":[],"definitions":{"subgraphs":[{"id":"aba5f702-28a4-417c-bf01-e3b2cb08aeeb","version":1,"state":{"lastGroupId":10,"lastNodeId":110,"lastLinkId":181,"lastRerouteId":0},"revision":0,"config":{},"name":"Image Character Reference (USO)","inputNode":{"id":-10,"bounding":[-1430,530,135.044921875,140]},"outputNode":{"id":-20,"bounding":[990,530,120,60]},"inputs":[{"id":"5ae9cee2-cd3d-4f0d-9cd1-ae758e057230","name":"image","type":"IMAGE","linkIds":[171],"localized_name":"image","label":"reference_image","pos":[-1314.955078125,550]},{"id":"a7475ffe-1aa6-44a5-a161-8a9eac72621f","name":"text","type":"STRING","linkIds":[174],"pos":[-1314.955078125,570]},{"id":"517a5788-f00b-4eca-8794-48b8439ec74a","name":"width","type":"INT","linkIds":[175],"pos":[-1314.955078125,590]},{"id":"2d96feb6-a24a-417a-b79a-8a615ddae59c","name":"height","type":"INT","linkIds":[176],"pos":[-1314.955078125,610]},{"id":"97c81ca9-58ef-4ca2-96ec-74634170a337","name":"seed","type":"INT","linkIds":[178],"pos":[-1314.955078125,630]}],"outputs":[{"id":"e4be4826-9c7d-4f82-9e3e-c8f3a57f683c","name":"IMAGE","type":"IMAGE","linkIds":[9],"localized_name":"IMAGE","pos":[1010,550]}],"widgets":[],"nodes":[{"id":57,"type":"a39c4d54-8414-49a7-a94b-45fec47438f1","pos":[-190,130],"size":[280,78],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":102},{"localized_name":"latent","name":"latent","type":"LATENT","link":103},{"name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[104]}],"properties":{"proxyWidgets":[["-1","guidance"]],"cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":[3.5]},{"id":30,"type":"CheckpointLoaderSimple","pos":[-690,-90],"size":[315,98],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[62]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[45]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[46,78]}],"properties":{"Node name for S&R":"CheckpointLoaderSimple","cnr_id":"comfy-core","ver":"0.3.56","models":[{"name":"flux1-dev-fp8.safetensors","url":"https://huggingface.co/Comfy-Org/flux1-dev/resolve/main/flux1-dev-fp8.safetensors","directory":"checkpoints"}]},"widgets_values":["flux1-dev-fp8.safetensors"]},{"id":40,"type":"CLIPVisionLoader","pos":[-690,310],"size":[315,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","links":[]}],"properties":{"Node name for S&R":"CLIPVisionLoader","cnr_id":"comfy-core","ver":"0.3.56","models":[{"name":"sigclip_vision_patch14_384.safetensors","url":"https://huggingface.co/Comfy-Org/sigclip_vision_384/resolve/main/sigclip_vision_patch14_384.safetensors","directory":"clip_vision"}]},"widgets_values":["sigclip_vision_patch14_384.safetensors"]},{"id":39,"type":"ModelPatchLoader","pos":[-690,200],"size":[315,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"name","name":"name","type":"COMBO","widget":{"name":"name"},"link":null}],"outputs":[{"localized_name":"MODEL_PATCH","name":"MODEL_PATCH","type":"MODEL_PATCH","links":[]}],"properties":{"Node name for S&R":"ModelPatchLoader","cnr_id":"comfy-core","ver":"0.3.56","models":[{"name":"uso-flux1-projector-v1.safetensors","url":"https://huggingface.co/Comfy-Org/USO_1.0_Repackaged/resolve/main/split_files/model_patches/uso-flux1-projector-v1.safetensors","directory":"model_patches"}]},"widgets_values":["uso-flux1-projector-v1.safetensors"]},{"id":43,"type":"LoraLoaderModelOnly","pos":[-690,60],"size":[315,82],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":62},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[181]}],"properties":{"Node name for S&R":"LoraLoaderModelOnly","cnr_id":"comfy-core","ver":"0.3.56","models":[{"name":"uso-flux1-dit-lora-v1.safetensors","url":"https://huggingface.co/Comfy-Org/USO_1.0_Repackaged/resolve/main/split_files/loras/uso-flux1-dit-lora-v1.safetensors","directory":"loras"}]},"widgets_values":["uso-flux1-dit-lora-v1.safetensors",1]},{"id":51,"type":"VAEEncode","pos":[-330,180],"size":[280,46],"flags":{"collapsed":true},"order":8,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":172},{"localized_name":"vae","name":"vae","type":"VAE","link":78}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[103]}],"properties":{"Node name for S&R":"VAEEncode","cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":[]},{"id":48,"type":"ConditioningZeroOut","pos":[-320,90],"size":[280,26],"flags":{"collapsed":true},"order":7,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":72}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[73]}],"properties":{"Node name for S&R":"ConditioningZeroOut","cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":[]},{"id":8,"type":"VAEDecode","pos":[530,-170],"size":[210,46],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":52},{"localized_name":"vae","name":"vae","type":"VAE","link":46}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[9]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":[]},{"id":6,"type":"CLIPTextEncode","pos":[-330,-130],"size":[422.8500061035156,164.30999755859375],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":45},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":174}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[72,102]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":110,"type":"EmptySD3LatentImage","pos":[-250,330],"size":[270,106],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":175},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":176},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[173]}],"properties":{"Node name for S&R":"EmptySD3LatentImage","cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":[1024,1024,1]},{"id":109,"type":"ImageScaleToMaxDimension","pos":[-700,520],"size":[281.2027282714844,82],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":171},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"largest_size","name":"largest_size","type":"INT","widget":{"name":"largest_size"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[172]}],"properties":{"Node name for S&R":"ImageScaleToMaxDimension","cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":["area",512]},{"id":31,"type":"KSampler","pos":[170,-170],"size":[315,474],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":181},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":104},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":73},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":173},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":178},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[52]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":[0,"randomize",20,1,"euler","simple",1]}],"groups":[{"id":3,"title":"Load Models","bounding":[-700,-200,340,650],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"Prompt","bounding":[-340,-200,460,430],"color":"#3f789e","font_size":24,"flags":{}},{"id":10,"title":"Image Size","bounding":[-340,250,460,200],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":45,"origin_id":30,"origin_slot":1,"target_id":6,"target_slot":0,"type":"CLIP"},{"id":102,"origin_id":6,"origin_slot":0,"target_id":57,"target_slot":0,"type":"CONDITIONING"},{"id":103,"origin_id":51,"origin_slot":0,"target_id":57,"target_slot":1,"type":"LATENT"},{"id":62,"origin_id":30,"origin_slot":0,"target_id":43,"target_slot":0,"type":"MODEL"},{"id":172,"origin_id":109,"origin_slot":0,"target_id":51,"target_slot":0,"type":"IMAGE"},{"id":78,"origin_id":30,"origin_slot":2,"target_id":51,"target_slot":1,"type":"VAE"},{"id":72,"origin_id":6,"origin_slot":0,"target_id":48,"target_slot":0,"type":"CONDITIONING"},{"id":52,"origin_id":31,"origin_slot":0,"target_id":8,"target_slot":0,"type":"LATENT"},{"id":46,"origin_id":30,"origin_slot":2,"target_id":8,"target_slot":1,"type":"VAE"},{"id":104,"origin_id":57,"origin_slot":0,"target_id":31,"target_slot":1,"type":"CONDITIONING"},{"id":73,"origin_id":48,"origin_slot":0,"target_id":31,"target_slot":2,"type":"CONDITIONING"},{"id":173,"origin_id":110,"origin_slot":0,"target_id":31,"target_slot":3,"type":"LATENT"},{"id":171,"origin_id":-10,"origin_slot":0,"target_id":109,"target_slot":0,"type":"IMAGE"},{"id":9,"origin_id":8,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":174,"origin_id":-10,"origin_slot":1,"target_id":6,"target_slot":1,"type":"STRING"},{"id":175,"origin_id":-10,"origin_slot":2,"target_id":110,"target_slot":0,"type":"INT"},{"id":176,"origin_id":-10,"origin_slot":3,"target_id":110,"target_slot":1,"type":"INT"},{"id":178,"origin_id":-10,"origin_slot":4,"target_id":31,"target_slot":4,"type":"INT"},{"id":181,"origin_id":43,"origin_slot":0,"target_id":31,"target_slot":0,"type":"MODEL"}],"extra":{"workflowRendererVersion":"LG"}},{"id":"a39c4d54-8414-49a7-a94b-45fec47438f1","version":1,"state":{"lastGroupId":0,"lastNodeId":56,"lastLinkId":102,"lastRerouteId":0},"revision":0,"config":{},"name":"USO Reference Conditioning","inputNode":{"id":-10,"bounding":[-20,283,120,100]},"outputNode":{"id":-20,"bounding":[560,293,128.6640625,60]},"inputs":[{"id":"d78373ce-7cdc-4e0f-a743-4d024e766376","name":"conditioning","type":"CONDITIONING","linkIds":[66],"localized_name":"conditioning","pos":[80,303]},{"id":"1eebe27a-c790-4a85-8aa2-3b9f4eeddd00","name":"latent","type":"LATENT","linkIds":[79],"localized_name":"latent","shape":7,"pos":[80,323]},{"id":"09894330-3dcb-4fba-87a5-33c3fb9db843","name":"guidance","type":"FLOAT","linkIds":[102],"pos":[80,343]}],"outputs":[{"id":"194badf0-ae11-47cd-a825-d7edd7ca6cc4","name":"CONDITIONING","type":"CONDITIONING","linkIds":[57],"localized_name":"CONDITIONING","pos":[580,313]}],"widgets":[],"nodes":[{"id":44,"type":"ReferenceLatent","pos":[190,430],"size":[204.134765625,46],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":66},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":79}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[64]}],"properties":{"Node name for S&R":"ReferenceLatent","cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":[]},{"id":35,"type":"FluxGuidance","pos":[160,200],"size":[211.60000610351562,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":67},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":102}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[57]}],"properties":{"Node name for S&R":"FluxGuidance","cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":[3.5]},{"id":41,"type":"FluxKontextMultiReferenceLatentMethod","pos":[170,320],"size":[330,60],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":64},{"localized_name":"reference_latents_method","name":"reference_latents_method","type":"COMBO","widget":{"name":"reference_latents_method"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[67]}],"properties":{"Node name for S&R":"FluxKontextMultiReferenceLatentMethod","cnr_id":"comfy-core","ver":"0.3.56"},"widgets_values":["uxo/uno"]}],"groups":[],"links":[{"id":67,"origin_id":41,"origin_slot":0,"target_id":35,"target_slot":0,"type":"CONDITIONING"},{"id":64,"origin_id":44,"origin_slot":0,"target_id":41,"target_slot":0,"type":"CONDITIONING"},{"id":66,"origin_id":-10,"origin_slot":0,"target_id":44,"target_slot":0,"type":"CONDITIONING"},{"id":79,"origin_id":-10,"origin_slot":1,"target_id":44,"target_slot":1,"type":"LATENT"},{"id":57,"origin_id":35,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"CONDITIONING"},{"id":102,"origin_id":-10,"origin_slot":2,"target_id":35,"target_slot":1,"type":"FLOAT"}],"extra":{"workflowRendererVersion":"LG"}}]},"config":{},"extra":{"workflowRendererVersion":"LG"},"version":0.4}